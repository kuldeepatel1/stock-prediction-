import{c as v,j as e,r as C,Z as O,T as X}from"./index-B98PupNe.js";import{R as Y,w as Z,x as U,X as H,Y as V,T as J,y as Q,t as F,z as _,F as ee}from"./LineChart-DLf5VVJj.js";import{T as te}from"./trending-down-DLbKuMNo.js";/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const T=v("AlertCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const I=v("Calendar",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ce=v("StarOff",[["path",{d:"M8.34 8.34 2 9.27l5 4.87L5.82 21 12 17.77 18.18 21l-.59-3.43",key:"16m0ql"}],["path",{d:"M18.42 12.76 22 9.27l-6.91-1L12 2l-1.44 2.91",key:"1vt8nq"}],["line",{x1:"2",x2:"22",y1:"2",y2:"22",key:"a6p6uj"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const se=v("Target",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"12",r:"6",key:"1vlfrh"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}]]),le=({data:d,prediction:t})=>{if(!d||d.length===0)return e.jsx("div",{className:"flex items-center justify-center h-64 text-gray-500",children:"No data available"});const g=d.map(s=>s.close),p=Math.max(...g),l=Math.min(...g),P=g.reduce((s,a)=>s+a,0)/g.length,k=s=>new Date(s).toLocaleDateString("en-IN",{month:"short",year:"2-digit"}),j=({active:s,payload:a,label:m})=>{var o,f;if(s&&a&&a.length){const n=((f=(o=a[0])==null?void 0:o.payload)==null?void 0:f.isPrediction)===!0;return e.jsxs("div",{className:"bg-white p-4 border border-gray-200 rounded-lg shadow-lg",children:[e.jsx("p",{className:"text-sm text-gray-600 mb-1",children:new Date(m).toLocaleDateString("en-IN",{year:"numeric",month:"long",day:"numeric"})}),e.jsxs("p",{className:`text-lg font-semibold ${n?"text-green-600":"text-blue-600"}`,children:[n?"Predicted: ":"₹",a[0].value.toLocaleString("en-IN",{minimumFractionDigits:2,maximumFractionDigits:2})]}),n&&t&&e.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:["Current: ₹",t.currentPrice.toLocaleString("en-IN",{minimumFractionDigits:2,maximumFractionDigits:2})]})]})}return null},r=(()=>{if(!t)return null;const s=new Date(t.year,(t.month||1)-1,t.day||1),a=s.toISOString().split("T")[0],m=s.getTime(),o=t.predictedPrice>=t.currentPrice;return{date:a,ts:m,predictedPrice:t.predictedPrice,isPrediction:!0,isGain:o,color:o?"#22c55e":"#ef4444",strokeColor:o?"#16a34a":"#dc2626"}})(),[h,b]=C.useState(null),z=C.useCallback(s=>{try{if(!s||!s.activeLabel)return;const a=Number(s.activeLabel),m=hoverZoomDays||14,o=1e3*60*60*24,f=Math.round(m*o/2);b([a-f,a+f])}catch{}},[]),R=C.useCallback(()=>b(null),[]),c=d.map(s=>({date:new Date(s.date).getTime(),price:s.close,isPrediction:!1})).sort((s,a)=>s.date-a.date);if(r){const s=r.ts??new Date(r.date).getTime(),a=c.length?c[c.length-1]:null,m=a?a.date:null,o=a?a.price:null,f=()=>{let n=0,u=0;for(;n===0;)n=Math.random();for(;u===0;)u=Math.random();return Math.sqrt(-2*Math.log(n))*Math.cos(2*Math.PI*u)};if(m&&s>m&&o!=null){const n=[];for(let i=1;i<d.length;i++){const x=d[i-1].close,N=d[i].close;x>0&&N>0&&n.push(Math.log(N/x))}const u=n.length?n.reduce((i,x)=>i+x,0)/n.length:0,S=n.length?n.reduce((i,x)=>i+(x-u)*(x-u),0)/n.length:0,W=Math.sqrt(S||0),A=Math.max(1,Math.round((s-m)/(1e3*60*60*24))),q=Math.max(1,Math.round(A/7)),L=Math.min(30,Math.max(6,q)),y=[];for(let i=1;i<=L;i++){const x=Math.round(m+(s-m)*i/L),N=o+(r.predictedPrice-o)*i/L,E=f()*(W||0)*2,K=Math.max(1,N*Math.exp(E));y.push({date:x,price:K,isPrediction:!0})}y[y.length-1].price=r.predictedPrice;const G=new Set(y.map(i=>i.date)),B=c.filter(i=>!G.has(i.date));c.length=0,c.push(...B,...y),c.sort((i,x)=>i.date-x.date)}else{const n=c.findIndex(u=>u.date===s);n>=0?c[n]={date:s,price:r.predictedPrice,isPrediction:!0}:(c.push({date:s,price:r.predictedPrice,isPrediction:!0}),c.sort((u,S)=>u.date-S.date))}}const w=c.filter(s=>!s.isPrediction),D=c.filter(s=>s.isPrediction),M=w.length&&D.length?[...w.slice(-1),...D]:D;return e.jsxs("div",{children:[e.jsx("div",{className:"h-64 sm:h-80",children:e.jsx(Y,{width:"100%",height:"100%",children:e.jsxs(Z,{data:c,margin:{top:20,right:30,left:20,bottom:20},children:[e.jsx(U,{strokeDasharray:"3 3",stroke:"#f0f0f0"}),e.jsx(H,{dataKey:"date",type:"number",domain:h||["dataMin","dataMax"],tickFormatter:k,stroke:"#6b7280",fontSize:12,tickCount:6,interval:0}),e.jsx(V,{stroke:"#6b7280",fontSize:12,tickFormatter:s=>`₹${s.toLocaleString("en-IN")}`}),e.jsx(J,{content:e.jsx(j,{})}),e.jsx(Q,{}),e.jsx(F,{data:w,type:"linear",dataKey:"price",stroke:"#2563eb",strokeWidth:2,dot:!1,activeDot:{r:6,stroke:"#2563eb",strokeWidth:2},name:"Closing Price (₹)"}),M&&M.length>1&&e.jsx(F,{data:M,type:"linear",dataKey:"price",stroke:"#60a5fa",strokeWidth:2,dot:!1,activeDot:{r:6,stroke:"#2563eb",strokeWidth:2},legendType:"none"}),r&&e.jsx(_,{x:r.ts??new Date(r.date).getTime(),y:r.predictedPrice,r:7,fill:r.color,stroke:r.strokeColor,strokeWidth:2,label:{position:"top",value:`₹${r.predictedPrice.toLocaleString("en-IN",{minimumFractionDigits:2,maximumFractionDigits:2})}`,fill:r.color,fontSize:12}}),r&&e.jsx(ee,{y:r.predictedPrice,stroke:r.color,strokeDasharray:"5 5",label:{value:r.isGain?"Predicted (Gain)":"Predicted (Loss)",position:"right",fill:r.color,fontSize:11}})]})})}),t&&e.jsxs("div",{className:`border rounded-lg p-3 mb-4 ${t.predictedPrice>=t.currentPrice?"bg-green-50 border-green-200":"bg-red-50 border-red-200"}`,children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("div",{className:"w-3 h-3 rounded-full",style:{backgroundColor:t.predictedPrice>=t.currentPrice?"#22c55e":"#ef4444"}}),e.jsx("span",{className:"text-sm font-medium",style:{color:t.predictedPrice>=t.currentPrice?"#16a34a":"#dc2626"},children:t.predictedPrice>=t.currentPrice?"Predicted Gain":"Predicted Loss"})]}),e.jsxs("span",{className:"text-lg font-bold",style:{color:t.predictedPrice>=t.currentPrice?"#16a34a":"#dc2626"},children:["₹",t.predictedPrice.toLocaleString("en-IN",{minimumFractionDigits:2,maximumFractionDigits:2})]})]}),e.jsxs("p",{className:"text-xs mt-1",style:{color:t.predictedPrice>=t.currentPrice?"#16a34a":"#dc2626"},onMouseMove:z,onMouseLeave:R,children:["For ",t.day,"-",t.month,"-",t.year.toString().slice(-2)," (dd-mm-yy)",t.predictedPrice>=t.currentPrice?" ▲ Price expected to rise":" ▼ Price expected to fall"]})]}),e.jsxs("div",{className:"grid grid-cols-3 gap-4 mt-2 pt-4 border-t border-gray-100",children:[e.jsxs("div",{className:"text-center",children:[e.jsx("p",{className:"text-sm text-gray-500",children:"High"}),e.jsxs("p",{className:"text-lg font-semibold text-green-600",children:["₹",p.toLocaleString("en-IN",{minimumFractionDigits:2,maximumFractionDigits:2})]})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("p",{className:"text-sm text-gray-500",children:"Low"}),e.jsxs("p",{className:"text-lg font-semibold text-red-600",children:["₹",l.toLocaleString("en-IN",{minimumFractionDigits:2,maximumFractionDigits:2})]})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("p",{className:"text-sm text-gray-500",children:"Avg"}),e.jsxs("p",{className:"text-lg font-semibold text-blue-600",children:["₹",P.toLocaleString("en-IN",{minimumFractionDigits:2,maximumFractionDigits:2})]})]})]})]})},re=(d,t,g)=>{if(!t||!g)return d.toString();const p=d.toString().slice(-2);return`${g.toString().padStart(2,"0")}-${t.toString().padStart(2,"0")}-${p}`},de=({company:d,year:t,month:g,day:p,prediction:l,isLoading:P,error:k})=>{const j=h=>typeof h!="number"||isNaN(h)?"—":h.toLocaleString("en-IN",{style:"currency",currency:"INR",minimumFractionDigits:2,maximumFractionDigits:2}),r=(()=>{if(!l||typeof l.currentPrice!="number"||typeof l.predictedPrice!="number")return null;const h=l.predictedPrice-l.currentPrice,b=h/l.currentPrice*100;return{amount:h,percent:b,isPositive:h>0}})();return e.jsxs("div",{className:"prediction-card rounded-2xl shadow-card border border-dark-100 overflow-hidden",children:[e.jsx("div",{className:"bg-gradient-to-r from-primary-600 to-accent-600 p-4 text-white",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"w-10 h-10 bg-white/20 backdrop-blur-sm rounded-lg flex items-center justify-center",children:e.jsx(se,{className:"h-5 w-5"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-primary-100",children:" Prediction"}),e.jsx("p",{className:"font-semibold",children:d.ticker})]})]}),e.jsxs("div",{className:"flex items-center space-x-1 bg-white/20 backdrop-blur-sm px-3 py-1 rounded-full",children:[e.jsx(I,{className:"h-4 w-4"}),e.jsx("span",{className:"text-sm font-medium",children:re(t,g,p)})]})]})}),e.jsx("div",{className:"p-6 space-y-4",children:P?e.jsxs("div",{className:"flex flex-col items-center justify-center py-8 space-y-4",children:[e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"w-16 h-16 border-4 border-primary-100 rounded-full"}),e.jsx("div",{className:"absolute top-0 left-0 w-16 h-16 border-4 border-primary-600 rounded-full border-t-transparent animate-spin"})]}),e.jsx("p",{className:"text-sm text-dark-500 animate-pulse",children:"Analyzing market data..."})]}):k?e.jsxs("div",{className:"text-center py-8",children:[e.jsx("div",{className:"w-16 h-16 bg-red-100 rounded-full flex items-center justify-center mx-auto mb-4",children:e.jsx(T,{className:"h-8 w-8 text-red-500"})}),e.jsx("p",{className:"text-red-600 font-medium mb-2",children:"Unable to load prediction"}),e.jsx("p",{className:"text-sm text-dark-500",children:"Please try again later"})]}):l?e.jsxs("div",{className:"space-y-4",children:[e.jsx("div",{className:"bg-dark-50 rounded-xl p-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("div",{className:"w-8 h-8 bg-dark-200 rounded-lg flex items-center justify-center",children:e.jsx("svg",{className:"w-4 h-4 text-dark-500",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8c-1.657 0-3 .895-3 2s1.343 2 3 2 3 .895 3 2-1.343 2-3 2m0-8c1.11 0 2.08.402 2.599 1M12 8V7m0 1v8m0 0v1m0-1c-1.11 0-2.08-.402-2.599-1M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})})}),e.jsx("span",{className:"text-sm text-dark-500",children:"Current Price"})]}),e.jsx("p",{className:"text-xl font-bold text-dark-800",children:j(l.currentPrice)})]})}),e.jsxs("div",{className:"relative overflow-hidden bg-gradient-to-br from-primary-50 to-accent-50 rounded-xl p-4 border border-primary-100",children:[e.jsx("div",{className:"absolute top-0 right-0 w-24 h-24 bg-primary-500/10 rounded-full -mr-8 -mt-8"}),e.jsxs("div",{className:"flex items-center justify-between relative z-10",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("div",{className:"w-8 h-8 bg-primary-100 rounded-lg flex items-center justify-center",children:e.jsx(O,{className:"w-4 h-4 text-primary-600"})}),e.jsx("span",{className:"text-sm text-primary-700 font-medium",children:"Predicted Price"})]}),e.jsx("p",{className:"text-2xl font-bold text-primary-700",children:j(l.predictedPrice)})]})]}),r&&e.jsxs("div",{className:`rounded-xl p-4 border ${r.isPositive?"bg-gradient-to-br from-green-50 to-emerald-50 border-green-100":"bg-gradient-to-br from-red-50 to-rose-50 border-red-100"}`,children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[r.isPositive?e.jsx(X,{className:"h-5 w-5 text-green-600"}):e.jsx(te,{className:"h-5 w-5 text-red-600"}),e.jsx("span",{className:`text-sm font-medium ${r.isPositive?"text-green-700":"text-red-700"}`,children:"Expected Change"})]}),e.jsxs("span",{className:`text-lg font-bold ${r.isPositive?"text-green-700":"text-red-700"}`,children:[r.isPositive?"+":"",r.percent.toFixed(2),"%"]})]}),e.jsxs("p",{className:`text-2xl font-bold ${r.isPositive?"text-green-800":"text-red-800"}`,children:[r.isPositive?"+":"",j(r.amount)]})]}),e.jsxs("div",{className:"bg-gradient-to-r from-yellow-50 to-orange-50 rounded-xl p-4 border border-yellow-100",children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("div",{className:"w-8 h-8 bg-yellow-100 rounded-lg flex items-center justify-center",children:e.jsx("svg",{className:"w-4 h-4 text-yellow-600",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})})}),e.jsx("span",{className:"text-sm font-medium text-yellow-700",children:"Confidence"})]}),e.jsxs("span",{className:"text-sm font-bold text-yellow-700",children:[l.confidence??"—","%"]})]}),e.jsx("div",{className:"relative h-3 bg-yellow-200 rounded-full overflow-hidden",children:e.jsx("div",{className:"absolute inset-y-0 left-0 bg-gradient-to-r from-yellow-400 to-orange-500 rounded-full transition-all duration-1000",style:{width:`${l.confidence??0}%`}})})]}),e.jsx("div",{className:"text-xs text-dark-500 bg-dark-50 p-3 rounded-lg leading-relaxed",children:e.jsxs("div",{className:"flex items-start space-x-2",children:[e.jsx(T,{className:"h-4 w-4 text-dark-400 flex-shrink-0 mt-0.5"}),e.jsx("p",{children:"This prediction is based on historical data and Ml models. Past performance does not guarantee future results. Please consult financial advisors before investing."})]})})]}):e.jsxs("div",{className:"text-center py-8",children:[e.jsx("div",{className:"w-16 h-16 bg-dark-100 rounded-full flex items-center justify-center mx-auto mb-4",children:e.jsx(I,{className:"h-8 w-8 text-dark-400"})}),e.jsx("p",{className:"text-dark-500 font-medium",children:"Select a year to see predictions"})]})})]})};export{I as C,de as P,ce as S,le as a};
